\documentclass[../kategoricna_logika.tex]{subfiles}
\begin{document}
\section{Regularna logika}
Do sedaj smo videli povezavo med algebrajsko teorijo in kategorijo z neko dodatno struktuo, ki nam je omogočila interpretacijo take teorije v semantiki same kategorije. Teorija, ki smo jo obravnavali je bila precej enostavna s stališča logike, saj so bile edine logične formule, ki smo jih lahko konstruirali oblike $t_1 = t_2$ za neka terma, sestavljena induktivno iz spremenljivk in funkcijskih simbolov. 
Že iz teh osnovnih gradnikov je mogoče dobiti pomembne matematične "infrastrukture", kot je na primer teorija grup. Za opis nekih matematičnih teorij pa jasno ta stopnja kompleksnosti ne zadostuje.
Videli smo, da se teorije polj ne da opisati z algebrajsko teorijo. Moderna matematika je standardno opisana v jeziku predukatne logike, oz logike drugega (ali višjega) reda, kjer imamo poleg funkcijskih simbolov še logične veznike kot so "in", "ali", negacijo in univerzalni ter eksistenčni kvantifikator.
Naravno vprašanje je torej, ali lahko zgodbo algebrajskih teorij ponovimo z neko močnejšo logiko in če se to da, kako se to odraža v strukturi kategorijo, ki jo dobimo na ta način in ali ohranimo lepe lastnosti, ki smo jih videli v primeru algebrajskih teorij.
Kot vemo iz Gödelovega izreka o polnosti logike prvega reda, za modele v kategoriji množic to velja. Zanima nas, ali je to definicijo modela mogoče razširiti na podoben način kot za algebrajske teorije.
Naredili bomo korak v to smer in našo logiko le delno razširili v tako imenovano $\emph{regularno logiko}$, kjer bomo formule gradili iz atomskih formul, logične konstante resničnosti $\top$, konjunkcij $\wedge$ in eksistenčnega kvantifikatorja $\exists$.
Videli bomo, da s to razširitvijo lahko ponovimo zgodbo iz prvega dela in nam to da tako imenovane \emph{regularne kategorije}, ki bodo imele dodatno strukturo, ki nam bo omogočala interpretacijo te logike.
Da to logiko definiramo, moramo najprej razširiti pojem jezika.
%
\begin{definicija}
  \emph{Signatura} regularnega jezika $\Sigma$ je sestavljena iz množice \emph{osnovnih tipov} $\underline{\mathrm{sort}}_\Sigma = \set{X_1, X_2, X_3, \ldots}$, množice konstant $\underline{\mathrm{const}}_\Sigma$, množice funkcijskih simbolov $\underline{\mathrm{func}}_\Sigma$ in množice relacijskih simbolov $\underline{\mathrm{rel}}_\Sigma$. Uporabljamo oznake kot so $c : X$ za konstante tipa $X$, $f : X_1 \times \ldots \times X_n \to Y$ za funkcijske simbole in $R \rightarrowtail X_1 \times \ldots \times X_n$ za relacijske simbole.
\end{definicija}
Pogosto bomo za $X_1 \times \ldots X_n$ uporabljali tudi oznako $\overline{X}$, kjer $n$ razberemo iz konteksta.
\begin{definicija}
  Naj bo $\Sigma$ signatura regularnega jezika. Potem \emph{(regularen?) jezik} $\mathcal{L}(\Sigma)$ sestoji iz signature $\Sigma$, za vsak osnovni tip $X$ imamo števno mnogo spremenljivk $x:X$. Množice termov $(T)$ in formul $(F)$ definiramo na sledeče načine:
  \begin{itemize}
    \item [(T1)] Če je $x$ spremenljivka tipa $X$, potem je $x$ term tipa $X$.
    \item [(T2)] Če je $c$ konstanta tipa $X$, potem je $c$ term tipa $X$.
    \item [(T3)] Če so $t_1, \ldots t_n$ že termi tipov $X_1, \ldots, X_n$ in je $f : X_1 \times \ldots \times X_n \to Y$ funkcijski simbol, potem je $f(t_1, \ldots, t_n)$ term tipa $Y$.
    \item [(F1)] Če sta $t_1, t_2$ terma tipov $X_1$ in $X_2$, potem je $t_1 = t_2$ formula. Bolj natančno bi to zapisali kot $t_1 =_X t_2$.
    \item [(F2)] Logična konstanta $\top$ (ki predstavlja resninično izjavo) je formula.
    \item [(F3)] Če so $t_1, \ldots t_n$ termi tipov $X_1, \ldots, X_n$ in je $R \rightarrowtail X_1 \times \ldots \times X_n$ relacijski simbol, potem je $R(t_1, \ldots, t_n)$ formula.
    \item [(F4)] Če sta $\varphi$ in $\psi$ logični formuli, potem sta $\varphi \wedge \psi$ in $\exists x \varphi$ tudi logični 
  \end{itemize}
  Za logično formulo $\varphi$, množico njenih prostih spremenljiv označujemo z $\mathrm{FV}(\varphi)$. \emph{Teorija} $T$, formulirana v jeziku $\mathcal{L}(\Sigma)$, je množica \emph{sekvent} oblike 
  $$\varphi \implies \psi$$
  kjer sta $\varphi$ in $\psi$ formuli v jeziku teorije $T$.
\end{definicija}
Če je v sekventi premisa enaka $\top$ potem $\top \implies \psi$ označujemo kar kot $\psi$.
\begin{primer}\label{primer:kompozitum}
  Naj bo $\Sigma$ signatura s termi osnovnimi tipi $X,Y$ in $Z$, ki vsebuje tri funkcijske simbole $f: X \to Y$, $g : Y \to Z$ in $h : X \to Z$. V jeziku $\mathcal{L}(\Sigma)$ potem, če je $x$ spremenljivka tipa $X$, lahko v jeziku $\mathcal{L}(\Sigma)$ tvorimo formulo
  $$f(g(x)) = h(x)$$
  Ko definiramo interpretacijo teorije bomo videli, da je to ravno formula, ki pomeni, da je $h$ kompozitum $f$ in $g$.
\end{primer}
Sedaj bomo definirali pravila sklepanja za naš fragment logike prvega reda, za katera bomo kasenje pokazali, da so "sound" in polna glede na kategorično semantiko, ki jim jih bomo dali.
Podali jih bomo kot zaporedja dedukcij oblike $\varphi \vdash_F \psi$, indeksiranih po končnih množicah spremenljivk $F$. Dedukcija $\varphi \vdash \psi$ je definirana le, če vse proste spremenljivke v $\varphi$ ali $\psi$ ležijo v $F$. V prihodnje bomo privzeli, da je za izraz $\varphi \vdash \psi$ ta pogoj vedno izpolnjen (napiši to lepše).
Tu moramo biti pozorni, saj na primer izraz $x_1 = x_2 \vdash_{x_1, x_2} x_2 = x_1$ ni enak izrazu $x_1 = x_2 \vdash_{x_1, x_2, x_3} x_2 = x_1$. Razlog za to podrobnost bomo razložili kasneje, ko definiramo semantiko v kategoriji.

Sedaj definiramo pravila sklepanja, ki jih razdelimo v tri sklope: (ali je lepo dati dvopičje direkt pred def okoljem)
\begin{definicija}
  $ $
  \begin{enumerate}[label*=\arabic*.]
    \item Strukturna pravila
    \begin{enumerate}[label*=\arabic*.]
      \item $p \vdash_F p$
      \item $\dfrac{p \vdash_F q \ q \vdash_F r}{p \vdash_F r}$
      \item $\dfrac{p \vdash_F q}{p \vdash_{F \cup \set{y}} q}$
      \item $\dfrac{\varphi(y) \vdash_F \psi(y)}{\varphi(b) \vdash_{F\setminus\set{y}} \psi(b)}$
      kjer je $y : B$ spremenljivka, $b$ pa term tipa $B$ in $b$ lahko zamenjamo za $y$ v obeh izrazih.
    \end{enumerate}
    \item Logična pravila
    \begin{enumerate}[label*=\arabic*.]
      \item $p \vdash_F \top$
      \item Če $r \vdash_F p \wedge q$ potem $r \vdash_F p$ in $r \vdash_F q$; in če $r \vdash_F p$ in $r \vdash_F q$ potem $r \vdash_F p \wedge q$.
      \item Če doda$\exists y \psi(y) \vdash_F p$ potem $\psi(y) \vdash_{F \cup \set{y}} p$; in obratno, če $\psi \vdash_{F \cup \set{y}} p$ potem $\exists y \psi(y) \vdash_F p$.
    \end{enumerate}
    \item Pravila za enakost
    \begin{enumerate}[label*=\arabic*.]
      \item $\top \vdash_x x = x$
      \item $x_1 = x_2 \vdash_{x_1, x_2} x_2 = x_1$
      \item $x_1 = x_2 \wedge x_2 = x_3 \vdash_{x_1, x_2, x_3} x_1 = x_3$
      \item $\overline{x}^1 = \overline{x}^2 \wedge f(\overline{x}^1) = f(\overline{x}^2)$
      \item $\overline{x}^1 = \overline{x}^2 \wedge R(\overline{x}^1) \vdash_{\overline{x}^1, \overline{x}^2} \mathrm{R}(\overline{x}^2)$
      kjer je $R \rightarrowtail \overline{X}$
    \end{enumerate}
  \end{enumerate}
  Če $F = \emptyset$ potem označimo $\vdash_\emptyset$ kot $\vdash$ in $\emptyset \vdash_F \psi$ označimo z $\vdash_F \psi$.
  Če imamo podano teorijo $T$, pišemo $T, \varphi \vdash_F \psi$, če $\varphi_F^T \psi$, kjer $\varphi_F^T$ pomeni dedukcijo po zgornjih pravilih sklepanja z dodatnim aksiomom
  $$\varphi \vdash_{\mathrm{FV}(\varphi) \cup \mathrm{FV}(\psi)} \psi$$
  za vsako sekvento $\varphi \implies \psi$ v $T$. Alternativno lahko to označimo z $T \vdash_F \varphi \implies \psi$, kar nakazuje, da $\varphi$ implicira $\psi$, modulo $T$.
\end{definicija}
\begin{primer}[izpeljava]
  
\end{primer}
%
\section{Regularne kategorije}
Regularna logika ima jasno v primerjavi z algebrajskimi teorijami dodatno strukturo, ki se bo odražala v strukturi kategorije v kateri jo bomo lahko interpretirali.
Za to nalogo bo pomemben koncept podobjekta v kategoriji.
\begin{definicija}
 Naj bo $\cat{C}$ kategorija in $X \in \cat{C}$ objekt.
 \emph{Podobjekt} objekta $X$ je ekvivalenčni razred monomorfizmov $\alpha : A \rightarrowtail X$, kjer sta dva monomorfizma $\alpha$ in $\beta : B \rightarrowtail X$ ekvivalenta, če sta $A$ in $B$ izomorfna nad $X$.
 (Z drugimi besedami, če sta $A$ in $B$ isti objekt v $\cat{C}/X$). To pomeni, da obstaja tak izomorfizem $i : A \xrightarrow{\cong} B$, da diagram
 \begin{equation*}
   \begin{tikzcd}[column sep=small]
     A \ar[rr, "i"']{a}{\cong} \ar[dr, "\alpha"'] & & B \ar[dl, "\beta"] \\
     & X &
   \end{tikzcd}
 \end{equation*}
 komutira. Pogosto morfizma $\alpha$ ne navedemo eksplicitno ampak pišemo samo $A \rightarrowtail X$. 
 Razred vseh podobjektov objekta $X$ označimo z $\Sub(X)$ in ga opermimo z relacijo delne urejenosti, kjer je $A \leq B$, če lahko $\alpha : A \rightarrowtail X$ faktoriziramo(?) skozi podobjekt $\beta : B \rightarrowtail X$.
\end{definicija}
Ta delno urejeni razred ima največji element, in sicer $\mathrm{id}_X$.
\begin{definicija}
    Pravimo da je kategorija $\cat{C}$ \emph{dobro pogojena}, če je $\Sub(X)$ množica za vsak objekt $X \in \cat{C}$.
\end{definicija}
Od sedaj naprej bomo privzeli, da je $\cat{C}$ dobro pogojena. Oglejmo si interakcijo med množico $\Sub(X)$ in nekaterimi kategoričnimi konstrukti.

Recimo, da $\cat{C}$ ima vse povleke. Potem lahko za vsak $X \in \cat{C}$ v množici $\Sub(X)$ tvorimo konjunkcije. Recimo namreč, da imamo $\alpha : A \rightarrowtail X$ in $\beta : B \rightarrowtail X$. Potem njuno konjunkcijo predstavlja kompozitum $A \times_X B \rightarrowtail X$, ki ga dobimo iz diagrama povleka:
\begin{equation*}
    \begin{tikzcd}
        A \times_X B \ar[r, hook] \ar[d, hook] & B \ar[d, hook, "\beta"] \\
        A \ar[r, hook, "\alpha"] & X
    \end{tikzcd}
\end{equation*}
Opazimo lahko tudi, da sta obe projekciji v povleku monomorfizma. Naj bo sedaj $f : X \to Y$ morfizem v $\cat{C}$. Potem dobimo s povlekom inducirano preslikavo
$$f^{-1} : \Sub(Y) \to \Sub(X)$$
ki pošlje podobjekt $\beta : B \rightarrowtail Y$ v $f^{-1}B \rightarrowtail X$ kar lahko prikažemo v diagramu
\begin{equation*}
    \begin{tikzcd}
        f^{-1} \ar[r, hook] \ar[d, hook] & B \ar[d, hook, "\beta"] \\
        X \ar[r, "f"] & Y
    \end{tikzcd}
\end{equation*}
Ta preslikava ohranja konjunkcije (dodamo dokaz?), kar pomeni, da za dobro pogojeno kategorijo $\cat{C}$ dobimo funktor $\Sub(\_) : \cat{C}^{\mathrm{op}} \to \cat{\wedge-\mathbf{SLat}}$, ki ga imenujemo \emph{podobjektni funktor}.
\begin{definicija}
    Recimo, da je $f : X \to Y$ morfizem v $\cat{C}$. Potem paru morfizmov $(p_1, p_2)$ iz diagrama povleka
    \begin{equation*}
        \begin{tikzcd}
        X \times_Y X \ar[d, "p_1"'] \ar[r, "p_2"] & X \ar[d, "f"] \\
        X \ar[r, "f"'] & Y
        \end{tikzcd}
    \end{equation*}
    pravimo \emph{par jedra} morfizma $f$.
\end{definicija}
Sedaj imamo pripravljeno vse potrebno, da definiramo regularno kategorijo.
\begin{definicija}
    Kategorija $\cat{C}$ je \emph{regularna}, če ima vse končne limite, če za vsak par jedra morfizma obstaja kozožek, in če povleki ohranjajo regularne epimorfizme.
\end{definicija}
Poglejmo si nekaj lastnosti regularnih kategorij.
\begin{lema}
    Naj bo $\cat{C}$ regularna kategorija. Potem
    \begin{enumerate}[label=(\roman*), nosep]
        \item Vsak regularni epimorfizem je kozožek svojega para jedra.
        \item Morfizem, ki je hkrati regularni epimorfizem in monomorfizem je izomorfizem.
        \item Kompozitum dveh regularnih epimorfizmov je regularen epimorfizem.
        \item Če sta morfizma $f : X \to Y$ in $g : Y \to Z$ taka, da sta $g \circ f$ in $f$ regularna epimorfizma, potem je tudi $g$ regularen epimorfizem
    \end{enumerate}
\end{lema}
\begin{dokaz}
    sorry
\end{dokaz}

Kot vidimo, imajo regularni epimorfizmi mnogo lepih lastnosti, ki smo jih vajeni iz surjektivnih funkcij v kategoriji $\cat{Set}$. Še ena posebno lepa lastnost v regularnih kategorijah je, da je mogoče vsak morfizem razcepiti kot regularen epimorfizem, ki mu sledi monomorfizem.
\begin{lema}
    Naj bo $\cat{C}$ regularna kategorija in $f: X \to Y$ morfizem v $\cat{C}$.
    Potem lahko $f$ razcepimo v kompozitum regularnega epimorfizma in monomorfizma. Velja tudi, da za vsak komutativni diagram
    \begin{equation*}
        \begin{tikzcd}
            X \ar[d, "e"'] \ar[r, "f"] & Y \ar[d, "m"] \\
            X' \ar[r, "f'"] & Y'
        \end{tikzcd}
    \end{equation*}
    v katerem je $e$ regularen epimorfizem in $m$ monomorfizem, obstaja enoličen diagonalni morfizem $d : X' \to Y$, tako da oba trikotnika komutirata.
    V posebnem, je zgornji razcep enoličen do izomorfizma natančno.
\end{lema}
\begin{dokaz}
    sorry
\end{dokaz}

\begin{definicija}
Monomorfizmu $m : E \hookrightarrow Y$, ki smo ga videli pri dokazu razcepitve morfizma $f$ pravimo \emph{(direktna) slika} in ga označimo z $\mathrm{Im}(f)$.
Včasih rečemo kar objektu $E$ slika $f$. Slika morfizma je določena le do izomorfizma natančno, a določa natanko en podobjekt objekta $Y$, ki ga označimo z $\exists_f(X)$.
Oznake $\mathrm{Im}(f)$, $\exists_f(X)$ in $E$ uporabljamo izmenljivo, če je namen jasen iz konteksta.

Za podobjekt $A \overset{\alpha}{\rightarrowtail} X$ definiramo sliko kot
$$\exists_f(A) := \mathrm{Im}(f \circ \alpha),$$
kar nam da dobro definirano preslikavo $\exists_f : \Sub(X) \to \Sub(Y)$.
\end{definicija}
\begin{lema}
  Naj bo $\cat{C}$ regularna kategorija. Naj bo $f : X \to Y$ morfizem v $\cat{C}$. Potem
  \begin{enumerate}[label=(\roman*)]
    \item Preslikava $\exists_f$ je monotona in skupaj z povlekom $f^{-1}$ tvorita adjungiran par funktorjev, torej $\exists_f \dashv f^{-1}$.
    \item Če je $g : Y \to Z$ morfizem v $\cat{C}$, potem velja $$\exists_g \circ \exists_f = \exists_{g \circ f} : \Sub(X) \to \Sub$$
  \end{enumerate}
\end{lema}
\begin{dokaz}
  sorry
\end{dokaz}

Kot posledico tega lahko vidimo, da $f^{-1}$ ohranja konjunkcije v $\Sub(Y)$.
\begin{lema}[Frobeniusova lema]
  Naj bo $\cat{C}$ regularna kategorija. Naj bo $f : X \to Y$ morfizem v $\cat{C}$ in $A \overset{\alpha}{\rightarrowtail} X$, $B \overset{\alpha}{\rightarrowtail} X$ podobjekta $X$. Potem velja
  $$\exists_f(A \wedge f^{-1}B) = \exists_f(A) \wedge B,$$
  kot elements $\Sub(X)$.
\end{lema}
\begin{dokaz}
  sorry
\end{dokaz}

Še ena izmed lepih lastnosti funkcij med množicami je, da jih lahko opišemo kot njihov graf. Izkaže se, da je taka konstrukcija mogoča tudi v regularnih kategorijah.
\begin{definicija}
  Naj bo $f : X \to Y$ morfizem v regularni kategoriji $\cat{C}$. Potem je \emph{graf} tega morfizma podobjekt
  $$\graph(f) \rightarrowtail X \times Y,$$
  ki ga definiramo kot sliko morfizma $\fprod{\mathrm{id}_X, f}$.
\end{definicija}

Opazimo lahko, da je kanonični morfizem $X \to \graph(f)$ izomorfizem (dodamo dokaz?).
\begin{lema}
  Naj bodo oznake kot v zgornji definiciji in naj bo $A \overset{\alpha}{\rightarrowtail} X$ podobjekt. Če z $\pi_X$ in $\pi_Y$ označimo projekciji iz produkta, potem velja
  $$\exists_f(A) = \exists_{\pi_Y}(\pi_X^{-1}(A) \wedge \graph(f))$$.
\end{lema}
\begin{dokaz}
  sorry
\end{dokaz}

Sedaj bomo opisali, kako lahko dobimo nazaj morfizem iz njegovega grafa.
\begin{definicija}
  Na podobjekt $R \rightarrowtail X \times Y$ lahko gledamo kot na relacijo med ``elementi'' $X$ in $Y$. Relaciji $R$ pravimo 
  \begin{itemize}
    \item \emph{totalna}, če je $\exists_{\pi_Y}R = X$ (to intuitivno pomeni, da je množica vseh tistih $x$, za katere obstaja nek $y$ za katerega velja $xRy$, enaka $X$).
    \item \emph{funkcijska}, če kanonični morfizem $R \times_X R \to X \times Y \times Y$, lahko faktoriziramo skozi inkluzijo $\mathrm{id}_X \times \Delta_Y : X \times Y \to X \times Y \times Y$. (tu si lahko predstavljamo, da ker $R \times_X R$ predstavlja trojice elementov $(x, y_1, y_2)$ za katere velja $xRy_1$ in $xRy_2$, nam ta faktorizacija omogoča, da iz tega izpeljemo $y_1 = y_2$).
  \end{itemize}
\end{definicija}
\begin{lema}
  Naj bo $\cat{C}$ regularna kategorija.
  \begin{enumerate}[label=(\roman*)]
    \item Graf morfizma $f : X \to Y$ je totalna in funkcijska relacija na $X \times Y$.
    \item Za vsako totalno in funkcijsko relacijo $R \rightarrowtail X \times Y$ obstaja natanko en morfizem $f : X \to Y$ za katerega je $R = \graph(f)$.
  \end{enumerate}
\end{lema}
\begin{dokaz}
  sorry
\end{dokaz}

Naslednja pomembna lastnost regularnih kategorij je interakcija slik in povlekov.
\begin{lema}
  Naj bo
  \begin{equation*}
    \begin{tikzcd}
      Z \times_Y X \ar[d, "f'"'] \ar[r, "g'"] & X \ar[d, "f"] \\
      Z \ar[r, "g"'] & Y
    \end{tikzcd}
  \end{equation*}
  kvadrat povleka. Potem je
  $$\exists_{g'}f^{'-1} = f^{-1}\exists_g : \Sub(Z) \to \Sub(X).$$
\end{lema}
\begin{dokaz}
  sorry
\end{dokaz}
\begin{definicija}
  Naj bosta $\cat{C}$ in $\cat{D}$ regularni kategoriji. Funktorju $F : \cat{C} \to \cat{D}$ pravimo \emph{regularen}, če ohranja končne limite in kozožke para jedra.
\end{definicija}
\begin{definicija}
  $\cat{RegCat}$ je kategorija v kateri so objekti majhne (ali je dovolj dobro pogojene?) kategorije in morfizmi regularni funktorji med njimi.
\end{definicija}

Ker je v kategoriji s povleki morfizem $f$ monomorfizem natanko takrat, ko je kvadrat
\begin{equation*}
  \begin{tikzcd}
    \bullet \ar[d, "\mathrm{id}"'] \ar[r, "\mathrm{id}"] & \bullet \ar[d, "f"] \\
    \bullet \ar[r, "f"] & \bullet
  \end{tikzcd}
\end{equation*}
povlek, to pomeni, da vsak regularen funktor $F : \cat{C} \to \cat{D}$ inducira za vsak objekt $X \in \cat{C}$, preslikavo
$$F_X : \Sub_\cat{C}(X) \to \Sub_\cat{D}(F(X)),$$
ki ohranja končne konjunkcije in največji element. Torej je v posebnem tudi monotona. $F$ pa tudi ohranja slike morfizmov, torej če imamo podobjekt $A \xhookrightarrow{\alpha} X \xrightarrow{f} Y$ potem je 
$$F(\exists_f A) = \exists_{F(f)}(F(A))$$.
(dodamo dokaz?)
to bi bilo mogoče boljše dati v neko eksplicitno lemo.
%
\section{Model regularnega jezika}
Recimo, da imamo regularen jezik $\mathcal{L}(\Sigma)$. Kot smo to storili za algebrajsko teorijo, bi radi definirali model tega jezika v neki regularni kategoriji.
Za to najprej potrebujemo interpretacijo.
\begin{opomba}
  Za definicijo interpretacije bomo potrebovali končne produkte in zožke, ki so v splošnem določeni le do izomorfizma natančno. Privzeli bomo, da lahko vedno \emph{izberemo} nek objekt, ki produkt oziroma zožek predstavlja. To pa pomeni, da moramo privzeti neko verzijo Aksioma Izbire.
\end{opomba}
\begin{definicija}
  Naj bo $\mathcal{L}(\Sigma)$ jezik. Potem \emph{interpretacija} $M$ v kategoriji $\cat{C}$ sestoji iz:
  \begin{itemize}
    \item Objekta $X^{(M)}$ v $\cat{C}$, za vsak osnovni tip $X \in \underline{\mathrm{sort}}_\Sigma$
    \item Morfizma $c^{(M)} : 1 \to X^{(M)}$ za vsako konstanto $c \in \underline{\mathrm{const}}_\Sigma$. Tu je $1$ končni objekt v $\cat{C}$.
    \item Morfizma $f^{(M)}  : X_1^{(M)} \times \ldots \times X_n^{(M)} \to Y^{(M)}$ za vsak funkcijski simbol $f : X_1 \times \ldots \times X_n \to Y \in \underline{\mathrm{func}}_\Sigma$.
    \item Podobjekta $R^{(M)} \rightarrowtail X_1^{(M)} \times \ldots \times X_n^{(M)}$ za vsak relacijski simbol\\ $R \rightarrowtail X_1 \times \ldots \times X_n \in \underline{\mathrm{rel}}_\Sigma$.
  \end{itemize}
  Produkt $X_1^{(M)} \times \ldots \times X_n^{(M)}$ označimo z $\overline{X}^{(M)}$. 
  Interpretacijo $M$ bomo razširili na vse terme in formule jezika.
  Za term $t$ tipa $Y$ s prostimi spremenljivkami med $\overline{z} : \overline{Z}$ bomo predpisali morfizem $t(\overline{z})^{(M)} : \overline{Z}^{(M)} \to Y^{(M)}$, za formulo $\varphi$ s prostimi spremenljivkami med $\overline{z} : \overline{Z}$ pa predpišemo podobjekt $\set{\overline{z} \mid \varphi}^{(M)}$ objekta $\overline{Z}^{(M)}$ po naslednjih pravilih:
  \begin{itemize}
    \item[(T1)] Če je $x$ spremenljivka tipa $X$ potem $x(\overline{z})^{(M)}$ definiramo kot kompozitum $\overline{Z}^{(M)} \xrightarrow{\pi} X^{(M)} \xrightarrow{\mathrm{id}_X}$. Tu je $\mathrm{id}_X$ tisti, ki interpretira $x$, medtem, ko je projekcija $\pi$ potrebna zaradi ``slepih'' spremenljivk, ki nastopajo v $\overline{z}$. (Opomnimo, da po predpostavki proste spremenljivke v termu $x$ (torej spremenljivka $x$ sama) nastopajo v $\overline{z}$).
    \item[(T2)] Če je $c:X$ konstanta, potem $c(\overline{z})^{(M)}$ interpretiramo kot kompozitum $\overline{Z} \to 1 \xrightarrow{c^{(M)}} X^{(M)}$.
    \item[(T3)] Naj bo $f : X_1 \times \ldots \times X_n \to Y$ funkcijski simbol in $t_i$ term tipa $X_i$ za $i \in \set{1, \ldots, n}$. Po indukciji imamo interpretacije $t_i(\overline{z})^{(M)} : \overline{Z}^{(M)} \to X_i^{(M)}$. Potem term $f(t_1, \ldots, t_n)$ interpretiramo kot kompozitum
    $$f^{(M)}(t_1^{(M)}, \ldots, t_n^{(M)}) : \overline{Z}^{(M)} \xrightarrow{\fprod{t_1^{(M)}, \ldots, t_n^{(M)}}} \overline{X}^{(M)} \xrightarrow{f^{(M)}} Y^{(M)}.$$
    \item[(F1)] Formuli $t_1 = t_2$ priredimo podobjekt $\set{\overline{z} \mid t_1 = t_2}^{(M)}$, ki ga definiramo kot zožek morfizmov
    \begin{tikzcd}[column sep=huge]\overline{Z}^{(M)} \ar[r, shift left, "t_1(\overline{z})^{(M)}"] \ar[r, shift right, "t_2(\overline{z})^{(M)}"'] & X^{(M)}\end{tikzcd}.
    \item[(F2)] $\set{\overline{z} \mid R(t_1, \ldots, t_n)}^{(M)}$ je podobjekt $\overline{Z}^{(M)}$ definiran kot povlek v diagramu
    \begin{equation*}
      \begin{tikzcd}
        \set{\overline{z} \mid R(t_1, \ldots, t_n)}^{(M)} \ar[d] \ar[r, hook] & \overline{Z}^{(M)} \ar[d, "\fprod{t_1^{(M)}, \ldots ,t_n^{(M)}}"] \\
        R^{(M)} \ar[r, hook] & \overline{X}^{(M)}
      \end{tikzcd}
    \end{equation*} 
    \item[(F3)] $\set{\overline{z} \mid \top}^{(M)}$ je enak $\overline{Z}^{(M)}$.
    \item[(F4)] $\set{\overline{z} \mid \varphi \wedge \psi}^{(M)} = \set{\overline{z} \mid \varphi}^{(M)} \wedge \set{\overline{z} \mid \psi}^{(M)}$.
    \item[(F5)] $\set{\overline{z} \mid \exists x \varphi}^{(M)} = \exists_{\pi}\set{(y, \overline{z}) \mid \varphi}^{(M)}$, kjer je $\pi$ projekcija\\ $Y^{(M)} \times \overline{Z}^{(M)} \xrightarrow{\pi} \overline{Z}^{(M)}$.
  \end{itemize}
\end{definicija}
\begin{definicija}
  Interpretaciji $M$ pravimo \emph{model} za sekvento $\varphi \implies \psi$, kar označimo kot
  $$M \models \varphi \implies \psi$$
  če je $\set{\overline{x} \mid \varphi}^{(M)} \leq \set{\overline{x} \mid \psi}^{(M)}$ kot podobjekta $\overline{X}^{(M)}$, kjer je $\overline{x}$ množica prostih spremenljivk, ki nastopajo prosto v $\varphi$ ali $\psi$. Interpretacija $M$ je model teorije $T$, če je model vsake sekvente v $T$. To označimo z $M \models T$.
\end{definicija}

Da je $M$ model $\varphi \implies \psi$ je v $\cat{Set}$ to ekvivalentno temu, da je $M$ model (v klasičnem smislu) formule $\forall \overline{x} (\varphi \rightarrow \psi)$. To je intuicija, ki jo je dobro imeti v mislih.
\begin{primer}
  Naj bo $\mathcal{L}(\Sigma)$ jezik iz primera \ref{primer:kompozitum} s tremi tipi $X,Y,Z$ in funkcijskimi simboli $f : X \to Y$, $g : Y \to Z$ in $h : X \to Z$. Potem za interpretacijo $M$ v regularni kategoriji $\cat{C}$ velja da je $M$ model formule $f(g(x)) = h(x)$, oziroma
  $$M \models \top \implies f(g(x)) = h(x)$$. Poglejmo si ta primer precej detajlno.
\end{primer}
%
\section{Interna logika regularne kategorije}
%
\section{Polnost regularne teorije}
\end{document}